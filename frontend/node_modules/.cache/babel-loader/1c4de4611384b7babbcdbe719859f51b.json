{"ast":null,"code":"var _jsxFileName = \"/Users/valentinlemaire/code/valentinLmr/projects/e-commerce/src/Component/Products/productsScreen.js\";\nimport React, { Component } from \"react\";\nimport CardProducts from \"./cardProducts\";\nimport datas from \"../../data\";\nimport product from \"./cardProducts\";\n\nclass productsScreen extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      arrayProducts: datas.products\n    };\n    this.filters = {\n      categories: [],\n      size: null,\n      brand: null,\n      color: null,\n      price: null,\n      data: null\n    };\n\n    this.splice = (array, value) => {\n      const index = array.indexOf(value);\n      array.splice(index, 1);\n    };\n\n    this.updateFilters = (filter, value) => {\n      switch (filter) {\n        case \"categories\":\n          if (this.filters[filter].includes(value) && this.filters[filter].length == 1) {\n            this.splice(this.filters[filter], value);\n            this.resetState();\n            this.filters.data = datas.products;\n          } else if (this.filters[filter].includes(value) && this.filters[filter].length > 1) {\n            this.splice(this.filters[filter], value);\n          } else {\n            this.filters.categories.push(value);\n          }\n\n          break;\n\n        case \"size\":\n          this.filters[filter] = value.toLowerCase();\n          let quantityForEachSizeForEachColor = [];\n          let initialState = datas.products;\n          let sum;\n\n          if (this.filters.data) {\n            this.filters.data.map(product => product.colors.map(color => this.checkQuantity(color)));\n          } else {\n            initialState.map(product => {\n              product.colors.map(color => {\n                quantityForEachSizeForEachColor.push(this.checkQuantity(color));\n              });\n              sum = quantityForEachSizeForEachColor.reduce((total, next) => total + next);\n              quantityForEachSizeForEachColor = [];\n              console.log(sum);\n\n              if (sum == 0) {\n                console.log(\"avant de splice initiale state\");\n                console.log(`initialState =`);\n                console.log(initialState);\n                console.log(`dataProdutc `);\n                console.log(datas.products);\n                this.splice(initialState, product);\n                console.log(\"après splice initiale state\");\n                console.log(`initialState = `);\n                console.log(initialState);\n                console.log(`dataProdutc =`);\n                console.log(datas.products);\n                this.setState({\n                  arrayProducts: initialState\n                });\n              } else {\n                console.log(\"got some product in stock\");\n              }\n            });\n          }\n\n          break;\n\n        case \"brand\":\n          this.filters[filter] = value;\n          break;\n\n        case \"color\":\n          this.filters[filter] = value;\n          break;\n\n        case \"price\":\n          this.filters[filter] = value;\n          break;\n      }\n\n      this.findProducts();\n    };\n\n    this.checkQuantity = element => {\n      let result;\n      let color;\n\n      if (!this.filters.color) {\n        result = element.sizes.find(product => product.size == this.filters.size);\n      } else {\n        color = element.filter(product => product.color == this.filters.color);\n      }\n\n      return result.quantity;\n    };\n\n    this.resetState = () => {\n      let products;\n      products = datas.products;\n      this.setState({\n        arrayProducts: products\n      });\n    };\n\n    this.findProducts = () => {\n      let arrayofproduct = [];\n\n      if (this.filters.categories.length > 0 && this.filters.price && this.filters.brand) {\n        this.filters.categories.map(categorie => arrayofproduct.push(this.filterMethod(datas.products, \"categories\", categorie)));\n        arrayofproduct = [].concat(...arrayofproduct);\n        arrayofproduct = arrayofproduct.filter(product => {\n          return product.price <= this.filters.price && product.brand == this.filters.brand;\n        });\n      } else if (this.filters.categories.length > 0 && this.filters.price) {\n        this.filters.categories.map(categorie => arrayofproduct.push(this.filterMethod(datas.products, \"categories\", categorie)));\n        arrayofproduct = [].concat(...arrayofproduct);\n        arrayofproduct = this.filterMethod(arrayofproduct, \"price\", this.filters.price);\n      } else if (this.filters.categories.length > 0 && this.filters.brand) {\n        this.filters.categories.map(categorie => arrayofproduct.push(this.filterMethod(datas.products, \"categories\", categorie)));\n        arrayofproduct = [].concat(...arrayofproduct);\n        arrayofproduct = this.filterMethod(arrayofproduct, \"brand\", this.filters.brand);\n      } else if (this.filters.categories.length == 0 && this.filters.price) {\n        arrayofproduct.push(this.filterMethod(datas.products, \"price\", this.filters.price));\n      } else if (this.filters.categories.length == 0 && this.filters.brand) {\n        arrayofproduct.push(this.filterMethod(datas.products, \"brand\", this.filters.brand));\n      } else if (this.filters.categories.length > 0) {\n        this.filters.categories.map(categorie => {\n          arrayofproduct.push(this.filterMethod(datas.products, \"categories\", categorie));\n        });\n      } else {\n        arrayofproduct = datas.products;\n      }\n\n      const products = [].concat(...arrayofproduct);\n      this.setState({\n        arrayProducts: products\n      });\n      this.filters.datas = products;\n    };\n\n    this.filterMethod = (arrayOfProductsTofilter, keyOfProduct, valueOfProduct) => {\n      console.log(arrayOfProductsTofilter);\n      console.log(keyOfProduct);\n      return arrayOfProductsTofilter.filter(product => {\n        console.log(product);\n        console.log(product[keyOfProduct]);\n        console.log(valueOfProduct);\n        return product[keyOfProduct] == valueOfProduct;\n      });\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"filterbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Searchbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      label: \"What are you looking for ?\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"filters\",\n      \"data-filter\": \"categories\",\n      onClick: e => {\n        console.log();\n        this.updateFilters(e.target.parentElement.dataset.filter, e.target.innerText);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, \"Robe\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }, \"Jupe\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }\n    }, \"Tee-shirt\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, \"Sweatshirt\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, \"Pants\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, \"Jean\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, \"Vest\"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }\n    }, \"overalls\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"under-filters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"under-filters-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      type: \"select\",\n      \"data-filter\": \"size\",\n      onChange: e => this.updateFilters(e.target.dataset.filter, e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    }, \"S\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }\n    }, \"M\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }\n    }, \"XL\")), /*#__PURE__*/React.createElement(\"select\", {\n      type: \"select\",\n      \"data-filter\": \"brand\",\n      onChange: e => this.updateFilters(e.target.dataset.filter, e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 17\n      }\n    }, \"Adidas\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 17\n      }\n    }, \"Nike\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, \"Vans\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }\n    }, \"Veja\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }\n    }, \"Converse\")), /*#__PURE__*/React.createElement(\"select\", {\n      type: \"select\",\n      \"data-filter\": \"price\",\n      onChange: e => this.updateFilters(e.target.dataset.filter, parseInt(e.target.value)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }\n    }, \"20 \\u20AC\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"40\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 17\n      }\n    }, \"40 \\u20AC\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"60\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }\n    }, \"60 \\u20AC\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"80\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }\n    }, \"80 \\u20AC\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 17\n      }\n    }, \"100 \\u20AC\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"150\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 17\n      }\n    }, \"150 \\u20AC\")), /*#__PURE__*/React.createElement(\"select\", {\n      type: \"select\",\n      onChange: e => this.updateFilters(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }\n    }, \"Blue\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }\n    }, \"Red\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }, \"Yellow\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }\n    }, \"Orange\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }\n    }, \"Green\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 17\n      }\n    }, \"Black\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-products-screen\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"products-display\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }\n    }, this.state.arrayProducts.map(product => /*#__PURE__*/React.createElement(CardProducts, {\n      product: product,\n      key: product.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nexport default productsScreen;","map":{"version":3,"sources":["/Users/valentinlemaire/code/valentinLmr/projects/e-commerce/src/Component/Products/productsScreen.js"],"names":["React","Component","CardProducts","datas","product","productsScreen","state","arrayProducts","products","filters","categories","size","brand","color","price","data","splice","array","value","index","indexOf","updateFilters","filter","includes","length","resetState","push","toLowerCase","quantityForEachSizeForEachColor","initialState","sum","map","colors","checkQuantity","reduce","total","next","console","log","setState","findProducts","element","result","sizes","find","quantity","arrayofproduct","categorie","filterMethod","concat","arrayOfProductsTofilter","keyOfProduct","valueOfProduct","render","e","target","parentElement","dataset","innerText","parseInt","id"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport CardProducts from \"./cardProducts\";\nimport datas from \"../../data\";\nimport product from \"./cardProducts\";\n\nclass productsScreen extends Component {\n  state = {\n    arrayProducts: datas.products,\n  };\n\n  filters = {\n    categories: [],\n    size: null,\n    brand: null,\n    color: null,\n    price: null,\n    data: null,\n  };\n\n  splice = (array, value) => {\n    const index = array.indexOf(value);\n    array.splice(index, 1);\n  };\n\n  updateFilters = (filter, value) => {\n    switch (filter) {\n      case \"categories\":\n        if (\n          this.filters[filter].includes(value) &&\n          this.filters[filter].length == 1\n        ) {\n          this.splice(this.filters[filter], value);\n          this.resetState();\n          this.filters.data = datas.products;\n        } else if (\n          this.filters[filter].includes(value) &&\n          this.filters[filter].length > 1\n        ) {\n          this.splice(this.filters[filter], value);\n        } else {\n          this.filters.categories.push(value);\n        }\n        break;\n\n      case \"size\":\n        this.filters[filter] = value.toLowerCase();\n        let quantityForEachSizeForEachColor = [];\n        let initialState = datas.products;\n        let sum;\n\n        if (this.filters.data) {\n          this.filters.data.map((product) =>\n            product.colors.map((color) => this.checkQuantity(color))\n          );\n        } else {\n          initialState.map((product) => {\n            product.colors.map((color) => {\n              quantityForEachSizeForEachColor.push(this.checkQuantity(color));\n            });\n\n            sum = quantityForEachSizeForEachColor.reduce(\n              (total, next) => total + next\n            );\n            quantityForEachSizeForEachColor = [];\n            console.log(sum);\n\n            if (sum == 0) {\n              console.log(\"avant de splice initiale state\");\n              console.log(`initialState =`);\n              console.log(initialState);\n              console.log(`dataProdutc `);\n              console.log(datas.products);\n\n              this.splice(initialState, product);\n              console.log(\"après splice initiale state\");\n              console.log(`initialState = `);\n              console.log(initialState);\n              console.log(`dataProdutc =`);\n              console.log(datas.products);\n\n              this.setState({ arrayProducts: initialState });\n            } else {\n              console.log(\"got some product in stock\");\n            }\n          });\n        }\n\n        break;\n\n      case \"brand\":\n        this.filters[filter] = value;\n        break;\n      case \"color\":\n        this.filters[filter] = value;\n        break;\n      case \"price\":\n        this.filters[filter] = value;\n        break;\n    }\n    this.findProducts();\n  };\n\n  checkQuantity = (element) => {\n    let result;\n    let color;\n    if (!this.filters.color) {\n      result = element.sizes.find(\n        (product) => product.size == this.filters.size\n      );\n    } else {\n      color = element.filter((product) => product.color == this.filters.color);\n    }\n    return result.quantity;\n  };\n\n  resetState = () => {\n    let products;\n    products = datas.products;\n    this.setState({ arrayProducts: products });\n  };\n\n  findProducts = () => {\n    let arrayofproduct = [];\n\n    if (\n      this.filters.categories.length > 0 &&\n      this.filters.price &&\n      this.filters.brand\n    ) {\n      this.filters.categories.map((categorie) =>\n        arrayofproduct.push(\n          this.filterMethod(datas.products, \"categories\", categorie)\n        )\n      );\n      arrayofproduct = [].concat(...arrayofproduct);\n      arrayofproduct = arrayofproduct.filter((product) => {\n        return (\n          product.price <= this.filters.price &&\n          product.brand == this.filters.brand\n        );\n      });\n    } else if (this.filters.categories.length > 0 && this.filters.price) {\n      this.filters.categories.map((categorie) =>\n        arrayofproduct.push(\n          this.filterMethod(datas.products, \"categories\", categorie)\n        )\n      );\n      arrayofproduct = [].concat(...arrayofproduct);\n      arrayofproduct = this.filterMethod(\n        arrayofproduct,\n        \"price\",\n        this.filters.price\n      );\n    } else if (this.filters.categories.length > 0 && this.filters.brand) {\n      this.filters.categories.map((categorie) =>\n        arrayofproduct.push(\n          this.filterMethod(datas.products, \"categories\", categorie)\n        )\n      );\n      arrayofproduct = [].concat(...arrayofproduct);\n      arrayofproduct = this.filterMethod(\n        arrayofproduct,\n        \"brand\",\n        this.filters.brand\n      );\n    } else if (this.filters.categories.length == 0 && this.filters.price) {\n      arrayofproduct.push(\n        this.filterMethod(datas.products, \"price\", this.filters.price)\n      );\n    } else if (this.filters.categories.length == 0 && this.filters.brand) {\n      arrayofproduct.push(\n        this.filterMethod(datas.products, \"brand\", this.filters.brand)\n      );\n    } else if (this.filters.categories.length > 0) {\n      this.filters.categories.map((categorie) => {\n        arrayofproduct.push(\n          this.filterMethod(datas.products, \"categories\", categorie)\n        );\n      });\n    } else {\n      arrayofproduct = datas.products;\n    }\n\n    const products = [].concat(...arrayofproduct);\n    this.setState({ arrayProducts: products });\n    this.filters.datas = products;\n  };\n\n  filterMethod = (arrayOfProductsTofilter, keyOfProduct, valueOfProduct) => {\n    console.log(arrayOfProductsTofilter);\n    console.log(keyOfProduct);\n    return arrayOfProductsTofilter.filter((product) => {\n      console.log(product);\n      console.log(product[keyOfProduct]);\n      console.log(valueOfProduct);\n      return product[keyOfProduct] == valueOfProduct;\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <section className=\"filterbar\">\n          <form>\n            <div className=\"Searchbar\">\n              <input type=\"text\" label=\"What are you looking for ?\" />\n              <i className=\"fas fa-search\"></i>\n            </div>\n          </form>\n          <ul\n            className=\"filters\"\n            data-filter=\"categories\"\n            onClick={(e) => {\n              console.log();\n              this.updateFilters(\n                e.target.parentElement.dataset.filter,\n                e.target.innerText\n              );\n            }}\n          >\n            <li>Robe</li>\n            <li>Jupe</li>\n            <li>Tee-shirt</li>\n            <li>Sweatshirt</li>\n            <li>Pants</li>\n            <li>Jean</li>\n            <li>Vest</li>\n            <li>overalls</li>\n          </ul>\n\n          <div className=\"under-filters\">\n            <form className=\"under-filters-form\">\n              <select\n                type=\"select\"\n                data-filter=\"size\"\n                onChange={(e) =>\n                  this.updateFilters(e.target.dataset.filter, e.target.value)\n                }\n              >\n                <option>S</option>\n                <option>M</option>\n                <option>XL</option>\n              </select>\n              <select\n                type=\"select\"\n                data-filter=\"brand\"\n                onChange={(e) =>\n                  this.updateFilters(e.target.dataset.filter, e.target.value)\n                }\n              >\n                <option>Adidas</option>\n                <option>Nike</option>\n                <option>Vans</option>\n                <option>Veja</option>\n                <option>Converse</option>\n              </select>\n              <select\n                type=\"select\"\n                data-filter=\"price\"\n                onChange={(e) =>\n                  this.updateFilters(\n                    e.target.dataset.filter,\n                    parseInt(e.target.value)\n                  )\n                }\n              >\n                <option value=\"20\">20 €</option>\n                <option value=\"40\">40 €</option>\n                <option value=\"60\">60 €</option>\n                <option value=\"80\">80 €</option>\n                <option value=\"100\">100 €</option>\n                <option value=\"150\">150 €</option>\n              </select>\n              <select\n                type=\"select\"\n                onChange={(e) => this.updateFilters(e.target.value)}\n              >\n                <option>Blue</option>\n                <option>Red</option>\n                <option>Yellow</option>\n                <option>Orange</option>\n                <option>Green</option>\n                <option>Black</option>\n              </select>\n            </form>\n          </div>\n        </section>\n        <div className=\"main-products-screen\">\n          <div className=\"products-display\">\n            {this.state.arrayProducts.map((product) => (\n              <CardProducts product={product} key={product.id} />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default productsScreen;\n"]},"metadata":{},"sourceType":"module"}